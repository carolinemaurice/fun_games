<div class="container">
  <h1>Profile</h1>
</div>

<div class="main_section row">

  <div class="col-3 sub_section">
    <h3>My account</h3>
    <div class="d-flex justify-content-center">
      <% if current_user.photo.key %>
        <%= cl_image_tag current_user.photo.key, height: 200, width: 200, crop: :fill, radius: :max %>
      <% else %>
        <%= image_tag "default_avatar.jpg", height: 200, width: 200, crop: :fill, radius: :max %>
      <% end %>
    </div>
    <div class="my-3">
      <p><strong>Name: </strong><%= current_user.first_name %> <%= current_user.last_name %></p>
      <p><strong>Username: </strong><%= current_user.username %></p>
      <p><strong>Address: </strong></p>
      <p><%= current_user.street_number %></p>
      <p><%= current_user.postal_code %> <%= current_user.city %></p>
    </div>
    <%= link_to "Edit my account", edit_user_registration_path %>
  </div>

  <div class="col-9">
    <div class="sub_section">
      <h3>My games</h3>
      <div class="row">
        <% @games.each do |game| %>
          <div class="col-3">
            <div class="card m-2 ">
              <%= cl_image_tag game.photos.first.key, class: 'card-img-top image-fit', height: 300, width: 400, crop: :fill  %>
              <div class="card-body">
                <h5 class="card-title fw-semibold"><%= game.name %></h5>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                <%= link_to 'More details', game_path(game), class: 'btn  btn-outline-info d-flex text-center justify-content-center' %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="sub_section">
      <h3>My reservations</h3>
      <div class="row">
        <% @bookings.each do |booking| %>
          <div class="col-3">
            <div class="card m-2 ">
              <%= cl_image_tag booking.game.photos.first.key, class: 'card-img-top image-fit', height: 300, width: 400, crop: :fill  %>
              <div class="card-body">
                <h5 class="card-title fw-semibold"><%= booking.game.name %></h5>
                <p class="card-text"><strong>Owner's game : </strong> <%= booking.game.user.username %> </p>
                <p class="card-text"><strong>Period of reservation : </strong></p>
                <p class="card-text">From <%= booking.start_date %> to <%= booking.end_date %></p>
                <p class="card-text"><strong>Status : </strong> <span class="status_pending"><%= booking.status %></span> </p>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>

</div>
